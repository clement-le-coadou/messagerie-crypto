<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connexion / Inscription</title>
    <link rel="stylesheet" href="styles/style.css">
</head>
<body>
    <div class="container">
        <div id="login-form">
            <h2>Connexion</h2>
            <input type="email" id="login-email" placeholder="Email">
            <input type="password" id="login-password" placeholder="Mot de passe">
            <button onclick="loginUser()">Se connecter</button>
            <p class="switch-form">Pas de compte ? <a onclick="toggleForm()">S'inscrire</a></p>
            <p id="login-error" class="error-message"></p>
        </div>

        <div id="register-form" class="hidden">
            <h2>Inscription</h2>
            <input type="text" id="register-prenom" placeholder="Prénom">
            <input type="text" id="register-nom" placeholder="Nom">
            <input type="email" id="register-email" placeholder="Email">
            <input type="password" id="register-password" placeholder="Mot de passe">
            <button onclick="registerUser()">S'inscrire</button>
            <p class="switch-form">Déjà un compte ? <a onclick="toggleForm()">Se connecter</a></p>
            <p id="register-error" class="error-message"></p>
        </div>
    </div>

    <script>
        const { ipcRenderer } = require('electron');

        function toggleForm() {
            document.getElementById("login-form").classList.toggle("hidden");
            document.getElementById("register-form").classList.toggle("hidden");
        }

        function loginUser() {
            const email = document.getElementById("login-email").value;
            const password = document.getElementById("login-password").value;
            ipcRenderer.send("login", { email, password });

            ipcRenderer.once("login-failed", (event, message) => {
                document.getElementById("login-error").innerText = message;
            });
        }

        function registerUser() {
            const nom = document.getElementById("register-nom").value;
            const prenom = document.getElementById("register-prenom").value;
            const email = document.getElementById("register-email").value;
            const password = document.getElementById("register-password").value;
            ipcRenderer.send("register", { nom,prenom, email, password });

            ipcRenderer.once("register-failed", (event, message) => {
                document.getElementById("register-error").innerText = message;
            });
        }
    </script>
</body>
</html>
